$(document).ready(function(e){function a(a){e("#result > .list-group").html(""),e("#result > .list-group").append('<li class="list-group-item list-group-item-danger">'+a+"</li>"),e("#loading").hide()}function r(r,t,l,i,s){p.length>1&&(window.history.pushState("wtf",e("title").html(),"?q="+p),document.title=p.split(" -")[0]+" - Alashov Music");var c={q:r,sort:d.sort,auto_complete:d.autoComplete,access_token:d.accessToken,count:d.count};null!=t&&null!=l&&(c.captcha_sid=t,c.captcha_key=l),s&&(c.performer_only=1),e.ajax({url:d.url,data:c,type:"POST",dataType:"jsonp",beforeSend:function(){e("#loading").show()},error:function(){a("Internet ýok öýdýän...")},success:function(t){if(t.error)return a(5==t.error.error_code?"Access Token ýalňyş":"Ýalňyşlyk : "+t.error.error_msg),void(14==t.error.error_code&&o(t.error.captcha_sid,t.error.captcha_img));if(0==t.response)return void a("Beýle aýdym ýok!");e("#result > .list-group").html("");for(var l=1;l<t.response.length;l++)downloadUrl="http://alashov.com/music/",ownerId=t.response[l].owner_id,aid=t.response[l].aid,prettyDownloadUrlMode?(ownerId<0&&(ownerId*=-1,downloadUrl+="-"),downloadUrl+=n(ownerId)+":"+n(aid)):downloadUrl+="download.php?audio_id="+ownerId+"_"+aid,audioTitle=t.response[l].artist+" - "+t.response[l].title,audioDuration=t.response[l].duration.toTime(),e("#result > .list-group").append('<li class="list-group-item"><span class="badge">'+audioDuration+'</span><span class="badge play" title="Diňlemek üçin basyň!"><span class="glyphicon glyphicon-play"></span></span><a title="Kompýutere ýüklemek üçin basyň!" target="_blank" data-src="'+t.response[l].url+'" href="'+downloadUrl+'">'+audioTitle+"</a></li>");if(i)try{ga("send","event","search",r)}catch(s){}e(".play").on("click",function(a){e("#jquery_jplayer_1").jPlayer("setMedia",{mp3:e(this).parent().find("a").attr("data-src")}),e("#jquery_jplayer_1").jPlayer("play"),e("#jp_container_1").show(),window.scrollTo(0,0)}),e("#loading").hide()}})}function o(a,o){try{ga("send","event","captcha")}catch(t){}e("#captchaModal").modal("show"),e("#captchaImage").attr("src",o),e("#captchaImage").on("click",function(a){e(this).attr("src",o)}),e("#captchaSend").on("click",function(){e("#captchaModal").modal("hide"),r(e("#query").val(),a,e("#captchaKey").val(),!0)}),e("#captchaKey").bind("keypress",function(a){13==a.keyCode&&e("#captchaSend").trigger("click")})}function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=a.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}function n(e){length=y.length;var a="";if(0==e)return y[0];for(;e>0;)val=parseInt(e%length),e=parseInt(e/length),a+=y[val];return a}prettyDownloadUrlMode=!0,e("#query").bind("keypress",function(a){13==a.keyCode&&e(".search").trigger("click")}),e("#jquery_jplayer_1").jPlayer({swfPath:"http://alashov.com/music/js",supplied:"mp3",wmode:"window",smoothPlayBar:!0,keyEnabled:!0,remainingDuration:!0,toggleDuration:!0,volume:1}),e('[data-toggle="tooltip"]').tooltip();var l=navigator.userAgent.toLowerCase(),i=l.indexOf("android")>-1;if(i){var s=confirm("Android App indir?");if(1==s){var c=window.open("http://bitly.com/M-APK","_blank");c.focus()}}var d={url:"https://api.vk.com/method/audio.search",sort:2,autoComplete:1,accessToken:"e9dbafe947e48136f15bbaf1184095282f53bb146441910421e180b46fa6cf6cf8c37f7de3f525d2c121d",count:300};e(".search").on("click touchstart",function(a){p=e("#query").val(),""!=p&&r(p,null,null,!0)});var p=t("q");if(p.length>1)r(p,null,null,!0),e("#query").val(p);else{var u=["Banks","Kygo","Ed Sheeran","Toe","Coldplay","The xx","MS MR","Macklemore","Lorde","Birdy","Seinabo Sey","Sia","M83","Hans Zimmer","Keaton Henson","Yiruma","Martin Garrix","Calvin Harris","Zinovia","Avicii","Iggy Azalea","Charli XCX","Sam Smith","deadmau5","Yann Tiersen","Jessie J"," Maroon 5","X ambassadors","Fink","Young Summer","Lana Del Rey","Arctic Monkeys"],h=u[Math.floor(Math.random()*u.length)];r(h,null,null,!1,!0),e("#query").val(h)}Number.prototype.toTime=function(){var e=parseInt(this,10),a=Math.floor(e/3600),r=Math.floor((e-3600*a)/60),o=e-3600*a-60*r;10>r&&(r="0"+r),10>o&&(o="0"+o);var t=r+":"+o;return t};var y=["A","B","C","D","E","F","G","H","J","K","M","N","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","j","k","m","n","p","q","r","s","t","u","v","x","y","z","1","2","3"]});