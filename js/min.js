$(document).ready(function(a){function e(e){a("#result > .list-group").html(""),a("#result > .list-group").append('<li class="list-group-item list-group-item-danger">'+e+"</li>"),a("#loading").hide()}function t(t,n,c){var s={q:t,sort:o.sort,auto_complete:o.autoComplete,access_token:o.accessToken,count:o.count};null!=n&&null!=c&&(s.captcha_sid=n,s.captcha_key=c),a.ajax({url:o.url,data:s,type:"GET",dataType:"jsonp",beforeSend:function(){a("#loading").show()},error:function(){e("Internet ýok öýdýän...")},success:function(o){if(o.error)return e(5==o.error.error_code?"Access Token ýalňyş":"Ýalňyşlyk : "+o.error.error_msg),void(14==o.error.error_code&&r(o.error.captcha_sid,o.error.captcha_img));if(0==o.response)return void e("Beýle aýdym ýok!");a("#result > .list-group").html("");for(var n=1;n<o.response.length;n++)a("#result > .list-group").append('<li class="list-group-item"> <span class="badge">'+o.response[n].duration.toTime()+'</span><span class="badge play"><span class="glyphicon glyphicon-play"></span></span><a  target="_blank" href="'+o.response[n].url+'">'+o.response[n].artist+" - "+o.response[n].title+"</a></li>");try{ga("send","event","search",t)}catch(c){}a(".play").on("click",function(){a(".navbar-audio").attr("src",a(this).parent().find("a").attr("href")),a(".navbar-audio").attr("style","");var e=document.getElementById("navbar-audio");e.play()}),a("#loading").hide()}})}function r(e,r){try{ga("send","event","captcha")}catch(o){}a("#captchaModal").modal("show"),a("#captchaImage").attr("src",r),a("#captchaImage").on("click",function(){a(this).attr("src",r)}),a("#captchaSend").on("click",function(){a("#captchaModal").modal("hide"),t(a("#query").val(),e,a("#captchaKey").val())}),a("#captchaKey").bind("keypress",function(e){13==e.keyCode&&a("#captchaSend").trigger("click")})}a("#query").bind("keypress",function(e){13==e.keyCode&&a(".search").trigger("click")});var o={url:"https://api.vk.com/method/audio.search",sort:2,autoComplete:1,accessToken:"4d45c6ebef3b05a910071c948bb1374015c9e47ad953fba2f631d8bc1fca425a0a0bffcb4955d3af90c07",count:500},n={url:"http://ws.audioscrobbler.com/2.0/",method:"artist.search",apiKey:"8b7af513f19366e766af02c85879b0ac",format:"json",limit:10};a("#query").autocomplete({source:function(e,t){a.get(n.url,{method:n.method,api_key:n.apiKey,format:n.format,limit:n.limit,artist:e.term},function(a){var e=[];if(void 0!=a.results.artistmatches.artist){for(var r=0;r<a.results.artistmatches.artist.length;r++)e.push(a.results.artistmatches.artist[r].name);t(e)}})},minLength:2,select:function(){a(".search").trigger("click");try{ga("send","event","autoCompleteSelect",a("#query").val())}catch(e){}}}),a(".search").on("click touchstart",function(){query=a("#query").val(),""!=query&&t(query,null,null)});var c=["Banks","Kygo","Ed Sheeran","Toe","Coldplay","The xx","MS MR","Macklemore","Lorde","Birdy","Seinabo Sey","Sia","M83","Hans Zimmer","Keaton Henson","Yiruma","Martin Garrix","Calvin Harris","Zinovia","Avicii","Iggy Azalea","Charli XCX","Sam Smith","deadmau5","Yann Tiersen","Jessie J"," Maroon 5","X ambassadors","Fink","Young Summer","Lana Del Rey","Arctic Monkeys"],s=c[Math.floor(Math.random()*c.length)];t(s),a("#query").val(s),Number.prototype.toTime=function(){var a=parseInt(this,10),e=Math.floor(a/3600),t=Math.floor((a-3600*e)/60),r=a-3600*e-60*t;10>t&&(t="0"+t),10>r&&(r="0"+r);var o=t+":"+r;return o}});